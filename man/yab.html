<HTML>
<HEAD>
<TITLE>yab</TITLE>
</HEAD>
<BODY>
<H1>yab</H1>
<HR>
<PRE>
<!-- Manpage converted by man2html 3.0.1 -->

</PRE>
<H2>SYNOPSIS</H2><PRE>
       <B>yab</B> [&lt;service&gt; &lt;method&gt; &lt;body&gt;] [OPTIONS]


</PRE>
<H2>DESCRIPTION</H2><PRE>
       yab  is  a  benchmarking  tool for TChannel and HTTP applications. It's
       primarily intended for Thrift applications but supports other encodings
       like JSON and binary (raw).

       It  can  be  used in a curl-like fashion when benchmarking features are
       disabled.



</PRE>
<H2>OPTIONS</H2><PRE>
   <B>Application</B> <B>Options</B>
       <B>--version</B>
              Displays the application version

   <B>Request</B> <B>Options</B>
       Configures the request data and the encoding.

       To make Thrift requests, specify a Thrift file and pass the Thrift ser-
       vice  and  procedure  to  the  method argument (-m or --method) as Ser-
       vice::Method.

            $ yab -p localhost:9787 kv -t kv.thrift -m KeyValue::Count -r '{}'

       You can also use positional arguments to specify the method and body:

            $ yab -p localhost:9787  -t kv.thrift kv KeyValue::Count '{}'

       The  TChannel  health  endpoint  can be hit without specifying a Thrift
       file by passing --health.

       Thrift requests can be specified as JSON or YAML. For  example,  for  a
       method defined as:

            void addUser(1: string name, 2: i32 age)

       You  can pass the request as JSON: {"name": "Prashant", age: 100} or as
       YAML:

            name: Prashant
            age: 100

       The request body can be specified on  the  command  line  using  -r  or
       --request:

            $  yab -p localhost:9787 -t kv.thrift kv KeyValue::Get -r '{"key":
       "hello"}'

       Or it can be loaded from a file using -f or --file:

       '{"key": "hello", "value": [100, 97, 116, 97]}'

            $ yab -p localhost:9787 -t kv.thrift kv KeyValue::Set -3  '{"key":
       "hello", "value": {"file": "data.bin"}}'


       <B>-e</B>, <B>--encoding</B>
              The  encoding  of  the  data,  options  are:  Thrift, JSON, raw.
              Defaults to Thrift if the method contains '::' or a Thrift  file
              is specified

       <B>-t</B>, <B>--thrift</B>
              Path of the .thrift file

       <B>-m</B>, <B>--method</B>
              The full Thrift method name (Svc::Method) to invoke

       <B>-r</B>, <B>--request</B>
              The request body, in JSON or YAML format

       <B>-f</B>, <B>--file</B>
              Path of a file containing the request body in JSON or YAML

       <B>--headers</B>
              The headers in JSON or YAML format

       <B>--headers-file</B>
              Path of a file containing the headers in JSON or YAML

       <B>--health</B>
              Hit the health endpoint, Meta::health

       <B>--timeout</B> &lt;default: <I>"1s"</I>&gt;
              The  timeout for each request. E.g., 100ms, 0.5s, 1s. If no unit
              is specified, milliseconds are assumed.

   <B>Transport</B> <B>Options</B>
       Configures the network transport used to make requests.

       yab can target both TChannel and HTTP endpoints. To specify a  TChannel
       endpoint, specify the peer's host and port:

            $ yab -p localhost:9787 [options]

       or

            $ yab -p tchannel://localhost:9787 [options]

       For HTTP endpoints, specify the URL as the peer,

            $ yab -p http://localhost:8080/thrift [options]

              The host:port of the service to call

       <B>-P</B>, <B>--peer-list</B>
              Path of a JSON or YAML file containing a list of host:ports

       <B>--caller</B>
              Caller  will  override  the  default  caller  name   (which   is
              yab-$USER).

       <B>--topt</B> Custom options for the specific transport being used

   <B>Benchmark</B> <B>Options</B>
       Configures benchmarking, which is disabled by default.

       By  default,  yab will only make a single request. To enable benchmark-
       ing, you must specify the maximum duration for the benchmark by passing
       -d or --max-duration.

       yab  will make requests until either the maximum requests (-n or --max-
       requests) or the maximum duration is reached.

       You can control the rate at which yab makes requests  using  the  --rps
       flag.

       An example benchmark command might be:

            yab -p localhost:9787 moe --health -n 100000 -d 10s --rps 1000

       This would make requests at 1000 RPS until either the maximum number of
       requests (100,000) or the maximum duration (10 seconds) is reached.

       By default, yab will create multiple  connections  (defaulting  to  the
       number  of CPUs on the machine), but will only have one concurrent call
       per connection.  The number of connections  and  concurrent  calls  per
       connection can be controlled using --connections and --concurrency.


       <B>-n</B>, <B>--max-requests</B> &lt;default: <I>"1000000"</I>&gt;
              The maximum number of requests to make

       <B>-d</B>, <B>--max-duration</B> &lt;default: <I>"0s"</I>&gt;
              The maximum amount of time to run the benchmark for

       <B>--cpus</B> The number of OS threads

       <B>--connections</B>
              The number of TCP connections to use

       <B>--warmup</B> &lt;default: <I>"10"</I>&gt;
              The number of requests to make to warmup each connection

       <B>--concurrency</B> &lt;default: <I>"1"</I>&gt;

                                 13 July 2016                           <B>yab(1)</B>
</PRE>
<HR>
<ADDRESS>
Man(1) output converted with
<a href="http://www.oac.uci.edu/indiv/ehood/man2html.html">man2html</a>
</ADDRESS>
</BODY>
</HTML>
